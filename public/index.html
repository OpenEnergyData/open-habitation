<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>Open Habitation API</title>

<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.1/css/bootstrap.min.css" integrity="sha512-6KY5s6UI5J7SVYuZB4S/CZMyPylqyyNZco376NM2Z8Sb8OxEdp02e1jkKk/wZxIEmjQ6DRCEBhni+gpr9c4tvA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>

<div class="container">
<div class="col-sm-12 col-sm-offset-2">

<header>
    <h1>Open Habitation</h1>
    <p>Swiss open habitation API</p>
</header>

<article>
    <h3>Basic Example</h3>


    <div class="ui-widget station">
      <form>
        <input class="form-control" id="search" placeholder="Enter an address ..." />
      </form>
    </div>
    <div class="media">
    </div>

    <table class="table" id="results">
      <thead>
        <tr>
          <th scope="col" data-col="id">#</th>
          <th scope="col" data-col="address">Address</th>
          <th scope="col" data-col="yearly_production">Production (annual)</th>
          <th scope="col" data-col="category">Category</th>
          <th scope="col" data-col="eco_rating">Eco Rating</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
</article>

<footer class="footer">
  <hr>
    <p class="pull-right">
      Powered by <a href="http://opendata.ch/">Opendata.ch</a>
      &bull;
      <a href="https://github.com/fuerstenberger/EcoHabitasOpen" target="_blank">
          Source Code
      </a>
    </p>
</footer>

</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.1/js/bootstrap.min.js" integrity="sha512-ewfXo9Gq53e1q1+WDTjaHAGZ8UvCWq0eXONhwDuIoaH8xz2r96uoAYaQCm1oQhnBfRXrvJztNXFsTloJfgbL5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script>

$(function () {

  function refresh(e) {
    e.stopPropagation();
    search = $('#search').val();
    if (search.length > 3) {
        $.post('/api/production/yearly', {address: search}, function(data) {
            $results = $('#results tbody').empty();
            $thead = $('#results thead th');
            $(data).each(function () {
                var line = '<tr>';
                var row = this;
                $thead.each(function () {
                  ref = $(this).data('col');
                  line += '<td>' + row[ref] + '</td>';
                })
                $results.append(line + '</tr>');
            });
        }, 'json');
    }
    return false;
  }

  $('#search').parent().submit(refresh);

});

</script>
<style>
    h3 {
         margin: 40px 0 20px;
    }

    .ui-widget,
    .ui-widget input {
        font-family: Arial, sans-serif;
        font-size: 13px;
    }

    .ui-autocomplete {
        text-align: left;
    }

    strong {
        color: #d10505;
    }

    .column {
        float: right;
    }

    .media {
        padding-top: 30px;
    }

    table {
        border-collapse: collapse;
        width: 100%;
    }

    td, th {
        padding: 8px;
        line-height: 18px;
        vertical-align: top;
        border-bottom: 1px solid #DDD;
    }

</style>

</body>
</html>
